# config.example.py
# 配置文件示例 - 可以复制为 config.py 并根据需要修改

"""
PDF压缩工具配置文件

这个文件包含了工具的各种配置选项。
复制此文件为 config.py 并根据需要修改参数。
"""

# =============================================================================
# 压缩策略配置
# =============================================================================

# 自定义压缩策略（如果不想使用默认策略）
CUSTOM_STRATEGIES = {
    # 可以添加自定义的压缩参数序列
    # 格式：层级 -> 参数列表
    # 1: {
    #     "name": "自定义高质量",
    #     "params_sequence": [
    #         {'dpi': 350, 'bg_downsample': 1},
    #         {'dpi': 300, 'bg_downsample': 2},
    #         # ...
    #     ]
    # }
}

# 质量底线设置
MIN_DPI = 100  # 最低可接受的DPI值
MAX_BG_DOWNSAMPLE = 6  # 最大背景降采样倍数

# =============================================================================
# 文件处理配置
# =============================================================================

# 默认目标大小（MB）
DEFAULT_TARGET_SIZE = 2.0

# 默认最大拆分数
DEFAULT_MAX_SPLITS = 4

# 临时文件清理
AUTO_CLEANUP_TEMP = True  # 是否自动清理临时文件
TEMP_DIR_PREFIX = "pdf_compressor_"  # 临时目录前缀

# =============================================================================
# OCR 配置
# =============================================================================

# Tesseract 语言设置
OCR_LANGUAGES = {
    'chinese': 'chi_sim',  # 简体中文
    'chinese_traditional': 'chi_tra',  # 繁体中文
    'english': 'eng',  # 英语
    'mixed': 'chi_sim+eng'  # 中英混合
}

# 默认OCR语言
DEFAULT_OCR_LANG = 'chi_sim'

# OCR处理选项
OCR_CONFIG = {
    'psm': 1,  # Page Segmentation Mode
    'oem': 1,  # OCR Engine Mode
}

# =============================================================================
# 日志配置
# =============================================================================

# 日志级别
LOG_LEVELS = {
    'DEBUG': 10,
    'INFO': 20,
    'WARNING': 30,
    'ERROR': 40,
    'CRITICAL': 50
}

DEFAULT_LOG_LEVEL = 'INFO'

# 日志文件设置
LOG_FILE_MAX_SIZE = 10 * 1024 * 1024  # 10MB
LOG_FILE_BACKUP_COUNT = 3  # 保留的日志文件数量

# =============================================================================
# 性能优化配置
# =============================================================================

# 并发处理设置（未来版本可能支持）
MAX_PARALLEL_JOBS = 1  # 目前版本仅支持单线程

# 内存使用限制
MAX_MEMORY_USAGE_MB = 1024  # 最大内存使用量（MB）

# 超时设置
COMMAND_TIMEOUT = 300  # 单个命令最大执行时间（秒）
TOTAL_PROCESS_TIMEOUT = 1800  # 单个文件最大处理时间（秒）

# =============================================================================
# 高级参数配置
# =============================================================================

# recode_pdf 高级参数
RECODE_PDF_ADVANCED = {
    'fg_slope': None,  # 前景层斜率，None表示使用默认值
    'bg_slope': None,  # 背景层斜率，None表示使用默认值
    'mask_compression': 'jbig2',  # 掩码压缩算法: jbig2 或 ccitt
    'jpeg_quality': None,  # JPEG质量，None表示使用默认值
}

# pdftoppm 高级参数
PDFTOPPM_ADVANCED = {
    'aa': True,  # 启用反锯齿
    'aaVector': True,  # 启用矢量反锯齿
    'forceNum': False,  # 强制数字页码
}

# =============================================================================
# 文件过滤配置
# =============================================================================

# 支持的文件扩展名
SUPPORTED_EXTENSIONS = ['.pdf', '.PDF', '.Pdf', '.pDf', '.pdF', '.PdF', '.PDf', '.pDF']

# 文件大小限制
MIN_FILE_SIZE_MB = 0.1  # 最小处理文件大小
MAX_FILE_SIZE_MB = 1000  # 最大处理文件大小

# =============================================================================
# 输出配置
# =============================================================================

# 输出文件命名
OUTPUT_NAMING = {
    'compressed_suffix': '_compressed',  # 压缩文件后缀
    'part_prefix': '_part',  # 拆分文件前缀
    'timestamp_format': '%Y%m%d_%H%M%S',  # 时间戳格式
}

# 是否保留原始文件信息
PRESERVE_METADATA = True

# =============================================================================
# 错误处理配置
# =============================================================================

# 重试配置
MAX_RETRIES = 2  # 最大重试次数
RETRY_DELAY = 5  # 重试间隔（秒）

# 错误处理策略
ERROR_HANDLING = {
    'continue_on_error': True,  # 遇到错误时是否继续处理其他文件
    'save_error_report': True,  # 是否保存错误报告
    'detailed_traceback': False,  # 是否在日志中包含详细错误跟踪
}

# =============================================================================
# 开发和调试配置
# =============================================================================

# 调试模式
DEBUG_MODE = False

# 是否保留中间文件（用于调试）
KEEP_INTERMEDIATE_FILES = False

# 性能分析
ENABLE_PROFILING = False

# 详细命令输出
VERBOSE_COMMANDS = False